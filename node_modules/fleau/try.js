var fleau = require('.')

var mold = "Characters:\n" +
  "{{ protagonists.forEach((guy, i) => {\n" +
  "  }} {{= i}}. {{= guy}}\n" +
  "{{ }) }}\n"
var cast = { "protagonists": ["Blondie", "Angel", "Tuco"] }
try {
  var template = fleau.template(mold)
} catch(e) { console.error(e.stack); process.exit(1) }
var output = ''
var write = function(str) { output += str }
var print = function() { console.log(output) }
try {
  template(write, cast, print)
} catch(e) {
  console.error(e.stack)
  console.error('Function:\n' + template.toString())
}
